@{
    ViewBag.Title = "About";
}

<div id="map"></div>
@section scripts {
<script>

    $(document).ready(function () {
        $.ajax({
            url: "https://app.ticketmaster.com/discovery/v2/events.json?countryCode=nl&apikey=KTmwKGyLJSOws2LFF9Al78erEjIRRF1u&id=" + "@ViewBag.Id",
            success: function (result) {
                //Event name
                //$('#eventTitle').html(result['_embedded']['events'][0]['name'])
                //Event image
                //$('#eventImage').attr('src', result['_embedded']['events'][0]['images'][0]['url'])

                //Long lat on google maps
                var long = result['_embedded']['events'][0]['_embedded']['venues'][0]['location']['longitude'];
                var lat = result['_embedded']['events'][0]['_embedded']['venues'][0]['location']['latitude'];
                var destination = { lat: parseFloat(lat), lng: parseFloat(long) }

                var c = { lat: 51.9189894, lng: 4.4842197 };

                var request = {
                    destination: destination,
                    origin: c,
                    travelMode: 'TRANSIT'

                };

                var map = new google.maps.Map(document.getElementById('map'), {
                    center: destination,
                    zoom: 12
                });

                var directionsDisplay = new google.maps.DirectionsRenderer({
                    map: map
                });

                // Pass the directions request to the directions service.
                var directionsService = new google.maps.DirectionsService();
                directionsService.route(request, function (response, status) {
                    if (status == 'OK') {
                        // Display the route on the map.
                        directionsDisplay.setDirections(response);
                    }
                });

                // description
                $("#omschrijving").html(result['_embedded']['events'][0]['name'] + "<br /> Datum: " + result['_embedded']['events'][0]['dates']['start']['localDate'] + " " + result['_embedded']['events'][0]['dates']['start']['localTime'] + " <br /> <a href=\"" + result['_embedded']['events'][0]['url'] + "\"> Koop hier uw tickets! </a>");
            }
        })
    });
        function initMap() {
            // Create a map object and specify the DOM element for display.
            var a = { lat: 51.9225, lng: 4.47917 };
            var b = { lat: 51.8827912, lng: 4.485995 };
            var c = { lat: 51.9189894, lng: 4.4842197 };


            //var map = new google.maps.Map(document.getElementById('map'), {
            //    center: a,
            //    zoom: 12
            //});

            //var directionsDisplay = new google.maps.DirectionsRenderer({
            //    map: map
            //});

            //var request = {
            //    destination: b,
            //    origin: a,
            //    travelMode: 'TRANSIT'

            //};

            //var requestb = {
            //    destination: b,
            //    origin: c,
            //    travelMode: 'TRANSIT'

            //};


            //// Pass the directions request to the directions service.
            //var directionsService = new google.maps.DirectionsService();
            //directionsService.route(request, function (response, status) {
            //    if (status == 'OK') {
            //        // Display the route on the map.
            //        directionsDisplay.setDirections(response);
            //    }
            //});

            //directionsService.route(requestb, function (response, status) {
            //    if (status == 'OK') {
            //        // Display the route on the map.
            //        directionsDisplay.setDirections(response);
            //    }
            //});

        }

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSjtaS93EaAoM3iB9FSMcx-8ZqxcWSAw4&callback=initMap"
        async defer></script>
}
